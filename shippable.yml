language: none

sudo: required

runtime:
  nodePool: shippable_shared_aarch64
  
build:
 ci:
  - wget https://launchpad.net/ubuntu/+archive/primary/+sourcefiles/ccache/3.2.4-1/ccache_3.2.4.orig.tar.bz2
  - tar xfvj ccache_3.2.4.orig.tar.bz2
  - cd ccache-3.2.4
  - ./configure && make && sudo make install
  - cd -
  - sudo apt-get update && sudo apt-get upgrade -y && sudo apt-get install build-essential g++ protobuf-compiler python libtool 
  - nvm install v10.9.0
  - sudo apt-get install protobuf-compiler protobuf-c-compiler libprotobuf-dev libgoogle-perftools-dev libprotoc-dev default-jre time
#E: Unable to locate package libv8-dev  
  - sudo npm install -g less@1.3.0
  - sudo npm install -g coffee-script@1.4.0
  - sudo npm install -g handlebars@1.0.10
  - sudo npm install -g mocha
#E: Unable to locate package  libboost-all-dev
#E: Unable to locate package  libjemalloc-dev
  - sudo -E npm install --global coffeescript@1.10.0 bluebird@2.9.32 browserify@13.1.0
  - sudo -E ./configure --fetch protobuf --fetch curl --fetch jemalloc --fetch boost 
  - cd external/bluebird_2.9.32/
  - sudo -E npm install -g npm npm-cache && rm -rf node_modules package-lock.json
  - sudo -E npm install -g
  - cd -
  - sudo -E make && sudo make install
  
